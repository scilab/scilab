<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Bache</TITLE>
<META NAME="description" CONTENT="Bache">
<META NAME="keywords" CONTENT="Bache">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="Bache.css">

</HEAD>

<BODY bgcolor="#FFFFFF">

<P>
<DIV ALIGN="CENTER">
Scicos Block
<BR><A NAME="tex2html1"
  HREF="../../fr/scicos/Bache.htm">fr</A> - <A NAME="tex2html2"
  HREF="./Bache.htm">eng</A>

</DIV>
<H2><A NAME="SECTION00010000000000000000"></A><A NAME="Bache"></A>
<BR>
Thermohydraulic tank (reservoir)
</H2>
<DIV ALIGN="CENTER">
<!-- MATH
 $\epsfig{file=Bache.eps,width=90.00pt}$
 -->
<IMG
 WIDTH="143" HEIGHT="184" ALIGN="BOTTOM" BORDER="0"
 SRC="Bache_img1.gif"
 ALT="\epsfig{file=Bache.eps,width=90.00pt}">

</DIV>
<BR>

<H3><font color="blue"><A NAME="SECTION00020000000000000000">
Contents</A>
</font></H3>
<!--Table of Contents-->

<UL CLASS="TofC">
<LI><A NAME="tex2html3"
  HREF="Bache.htm#SECTION00010000000000000000">Thermohydraulic tank (reservoir)</A>
<UL>
<LI><A NAME="tex2html4"
  HREF="Bache.htm#SECTION00021000000000000000">Description</A>
<LI><A NAME="tex2html5"
  HREF="Bache.htm#SECTION00022000000000000000">Dialog box</A>
<LI><A NAME="tex2html6"
  HREF="Bache.htm#SECTION00023000000000000000">Default properties</A>
<LI><A NAME="tex2html7"
  HREF="Bache.htm#SECTION00024000000000000000">Interfacing function</A>
<LI><A NAME="tex2html8"
  HREF="Bache.htm#SECTION00025000000000000000">Modelica model</A>
</UL></UL>
<!--End of Table of Contents-->
<H3><font color="blue"><A NAME="SECTION00021000000000000000">
Description</A>
</font></H3>

<P>
The <B>Bache</B> block represents a thermo-hydraulic tank or reservoir.
This block has two inlets and two outlets whose altitudes can be
changed by the user.  Conventionnally, for input ports (black ports)
flow direction is positive when fluid flows into the tank.  On the
other hand, for output ports (white ports) flow direction is positive
when fluid flows out of the tank. The user can set the surface area of
the tank, the initial temperature and initial level of the fluid in
the tank.  If an input or output port is left unused, it should be
blocked by a <B>stopper</B> block.

<H3><font color="blue"><A NAME="SECTION00022000000000000000">
Dialog box</A>
</font></H3>
<DIV ALIGN="CENTER">
<TABLE CELLPADDING=3 BORDER="1">
<TR><TD ALIGN="CENTER">Parametres de la bache</TD>
<TD ALIGN="CENTER">&nbsp;</TD>
</TR>
<TR><TD ALIGN="CENTER">Pression dans le ciel de la bache : Patm (Pa)</TD>
<TD ALIGN="CENTER">101300</TD>
</TR>
<TR><TD ALIGN="CENTER">Section de la bache : A (m2)</TD>
<TD ALIGN="CENTER">1</TD>
</TR>
<TR><TD ALIGN="CENTER">Altitude du piquage d entrée 1: ze1 (m)</TD>
<TD ALIGN="CENTER">40</TD>
</TR>
<TR><TD ALIGN="CENTER">Altitude du piquage d entrée 2: ze2 (m)</TD>
<TD ALIGN="CENTER">0</TD>
</TR>
<TR><TD ALIGN="CENTER">Altitude du piquage de sortie 1: zs1 (m)</TD>
<TD ALIGN="CENTER">40</TD>
</TR>
<TR><TD ALIGN="CENTER">Altitude du piquage de sortie 2: zs2 (m)</TD>
<TD ALIGN="CENTER">0</TD>
</TR>
<TR><TD ALIGN="CENTER">Altitude initiale du fluide : z0 (m)</TD>
<TD ALIGN="CENTER">30</TD>
</TR>
<TR><TD ALIGN="CENTER">Température initiale du fluide : T0 (K)</TD>
<TD ALIGN="CENTER">290</TD>
</TR>
<TR><TD ALIGN="CENTER">Si <SPAN CLASS="MATH"><IMG
 WIDTH="18" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="Bache_img2.gif"
 ALT="$ &gt;$"></SPAN>
0, masse volumique imposée du fluide : p_rho (kg/m3)</TD>
<TD ALIGN="CENTER">0</TD>
</TR>
</TABLE>
</DIV>

<P>

<UL>
<LI><b>Pression dans le ciel de la bache : Patm (Pa) </b> : Type 'vec' of size -1. Atmospheric pressure inside the tank.
</LI>
<LI><b>Section de la bache : A (m2) </b> : Type 'vec' of size -1. Surface area of the tank.
</LI>
<LI><b>Altitude du piquage d entrée 1: ze1 (m) </b> : Type 'vec' of size -1. Altitude of the first input port
</LI>
<LI><b>Altitude du piquage d entrée 2: ze2 (m) </b> : Type 'vec' of size -1. Altitude of the second input port
</LI>
<LI><b>Altitude du piquage de sortie 1: zs1 (m) </b> : Type 'vec' of size -1.  Altitude of the first output port.
</LI>
<LI><b>Altitude du piquage de sortie 2: zs2 (m) </b> : Type 'vec' of size -1. Altitude of the second output port.
</LI>
<LI><b>Altitude initiale du fluide : z0 (m) </b> : Type 'vec' of size -1. Initial fluid level in the tank.
</LI>
<LI><b>Température initiale du fluide : T0 (K) </b> : Type 'vec' of size -1. Temperature of fluid in the tank
</LI>
<LI><b>Si <SPAN CLASS="MATH"><IMG
 WIDTH="18" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="Bache_img2.gif"
 ALT="$ &gt;$"></SPAN>
0, masse volumique imposée du fluide : p_rho (kg/m3) </b> : Type 'vec' of size -1. Density of fluid
</LI>
</UL>

<H3><font color="blue"><A NAME="SECTION00023000000000000000">
Default properties</A>
</font></H3>

<UL>
<LI><b>always active:</b> no
</LI>
<LI><b>direct-feedthrough:</b> yes
</LI>
<LI><b>zero-crossing:</b> no
</LI>
<LI><b>mode:</b> no
</LI>
<LI><b>number/sizes of inputs:</b> 2 / 1  1
</LI>
<LI><b>number/sizes of outputs:</b> 3 / 1  1  1
</LI>
<LI><b>number/sizes of activation inputs:</b> 0 / 
</LI>
<LI><b>number/sizes of activation outputs:</b> 0 / 
</LI>
<LI><b>continuous-time state:</b> no
</LI>
<LI><b>discrete-time state:</b> no
</LI>
<LI><b>name of modelica function:</b> <EM>Bache</EM>
</LI>
</UL>

<H3><font color="blue"><A NAME="SECTION00024000000000000000">
Interfacing function</A>
</font></H3>
<TT>Bache.sci</TT>

<H3><font color="blue"><A NAME="SECTION00025000000000000000">
Modelica model</A>
</font></H3>
 <SMALL CLASS="TINY">  </SMALL>
<BR>
<PRE  CLASS="verbatim">class Bache 
  parameter Real Patm "Pression dans le ciel de la bache";
  parameter Real A "Section de la bache";
  parameter Real ze1 "Altitude du piquage d'entrée 1";
  parameter Real ze2 "Altitude du piquage d'entrée 2";
  parameter Real zs1 "Altitude du piquage de sortie 1";
  parameter Real zs2 "Altitude du piquage de sortie 2";
  parameter Real z0 "Altitude initiale du fluide";
  parameter Real T0 "Temperature initiale du fluide";
  parameter Real p_rho 
    "Si &gt; 0, masse volumique imposée du fluide";
//  parameter Integer mode "Région IF97. 1:liquide - 2:vapeur - 4:saturation - 0:calcul automatique";
  
  parameter Real g=9.80665 "Accélération de la pesanteur";
  parameter Real e=0.25 "Ouverture des piquages";
  parameter Real k=1
    "Coefficient de perte de charge des piquages";
  parameter Real eps=1.e-0 "Limite inf. de la fonction carrée";
  parameter Real zmin=1.e-6 
    "Hauteur minimum d'eau pour l'équation de l'énergie";
  Real z(start=z0) "Hauteur du fluide";
  Real Tm(start=T0) "Température moyenne";
  Real Pm(start=1.e5) "Pression moyenne";
  Real Hm(start=100000) "Enthalpie spécifique moyenne";
  Real rho(start=998) "Masse volumique";
  Real BQ "Bilan de masse";
  Real BH "Bilan d'énergie";
  Real Oe1;
  Real Oe2;
  Real Os1;
  Real Os2;
  Real region(start=1) "Numéro de région IF97";
  Real Max_e1;
  Real Max_e2;
  Real Max_s1;
  Real Max_s2;
  Real ThermoCar1;
  Real ThermoCar2;

  Real yNiveau ;

public 
//  SortieReelle yNiveau ;
  PortPHQ1 Ce1 ;
  PortPHQ2 Cs2 ;
//  PortTher Cth ; /* Port non utilisé dans le modèle désiré, non implanté sur le bloc SCICOS */
  PortPHQ1 Ce2 ;
  PortPHQ2 Cs1 ;

//initial equation 

//  Hm = 100000;
  
equation

  Ce2.Q = 0;
  Ce2.H = 1.e5;

  Cs1.Q = 0;
  Cs1.H = 1.e5;

  Max_e1 = if (z - ze1 &lt; 0.0) then 0.0 else (z - ze1);
  ThermoCar1 = if (abs(Ce1.Q) &gt; eps) then Ce1.Q*abs(Ce1.Q) else Ce1.Q*eps;
  (Patm + rho*g*Max_e1 - Ce1.P)*Oe1 = k*ThermoCar1/2/rho;

  Oe1 = if (Ce1.Q &gt;= 0.0) then 1.0
	elseif (z &gt; ze1 + e) then 1.0
	elseif (z &lt; ze1) then 0.0
	else (z - ze1)/e;


   Max_e2 = if (z - ze2 &lt; 0.0) then 0.0 else (z - ze2);

  Ce2.P = Patm + rho*g*Max_e2;
  Oe2 = 0;

  Max_s1 = if (z - zs1 &lt; 0.0) then 0.0 else (z - zs1);
  Cs1.P = Patm + rho*g*Max_s1;
  Os1 = 0;

  Max_s2 = if (z - zs2 &lt; 0.0) then 0.0 else (z - zs2);
  ThermoCar2 =if (abs(Cs2.Q) &gt; eps) then Cs2.Q*abs(Cs2.Q) else Cs2.Q*eps;
  (Patm + rho*g*Max_s2 - Cs2.P)*Os2 = k*ThermoCar2/2/rho;

  Os2 = if (Cs2.Q &lt;= 0.0) then 1.0
    elseif (z &gt; zs2 + e) then 1.0
    elseif (z &lt; zs2) then 0.0
    else (z - zs2)/e;


  /* Bilan de masse */
  BQ = Ce1.Q + Ce2.Q - Cs1.Q - Cs2.Q;
  rho*A*der(z) = BQ;
  
  /* Bilan d'énergie */
  /* le port thermique n'est pas utilisé ici  "+ Cth.W" (on a W=0)*/
  BH = Ce1.Q*(Ce1.H - Hm) + Ce2.Q*(Ce2.H - Hm) - Cs1.Q*(Cs1.H - Hm) - Cs2.Q*(Cs2.H - Hm);

  der(Hm) = if (z &gt; zmin) then BH/(rho*A*z) else 0.0;

  Ce1.Hm = Hm;
  Ce2.Hm = Hm;
  Cs1.Hm = Hm;
  Cs2.Hm = Hm;
  
//  Cth.T = Tm; /* le port thermique n'est pas utilisé ici*/
  
  /* Capteur de niveau */
  yNiveau = z;
  
  /* Calcul des propriétés thermodynamiques */
  Pm = Patm + rho*g*z/2;
  
  Tm = Hm/4187 + 273.15;
  region = 1.0;
  
  rho = 998.0;

end Bache;
</PRE>

<BR>




</BODY>
</HTML>
