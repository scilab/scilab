// <-- Non-regression test for bug 1902 -->
//
// <-- Bugzilla URL -->
// http://bugzilla.scilab.org/show_bug.cgi?id=1902
//
// <-- Short Description -->
//    in drawlater mode the bounding box of strings may be wrong
// Copyright INRIA
// Scilab Project - Jean-Baptiste Silvy
// Copyright INRIA 2006
// Date : October 25 2006
// draw later part
drawlater() ;
xstring(0,0,['toto','titi';"tatapjp","iiih"]) ;
e             = gce();
box11         = stringbox(e);
a             = gca() ;
a.data_bounds = [-2,-2;7,7] ;
box21         = stringbox(e);
a.view        = '3d';
box31         = stringbox(e);
a.data_bounds = [0,-1,3;6,7,8];
box41         = stringbox(e);
drawnow();
clf();
// same as first part but wthout drawlater
xstring(0,0,['toto','titi';"tatapjp","iiih"]) ;
e             = gce();
box12         = stringbox(e)
 box12  =
 
  - 0.1666667  - 0.1666667  - 0.1666667  - 0.1666667  
    1.1666667    0.0004177    0.0004177    1.1666667  
a             = gca();
a.data_bounds = [-2,-2;7,7] ;
box22         = stringbox(e);
a.view        = '3d';
box32         = stringbox(e);
a.data_bounds = [0,-1,3;6,7,8] ;
box42         = stringbox(e);
// bounding box should be the same either we are in drawlater or not.
if (  norm( box11 - box12 ) >= 0.10..
    | norm( box21 - box22 ) >= 0.10..
    | norm( box31 - box32 ) >= 0.10..
    | norm( box41 - box42 ) >= 0.1 )  then bugmes();quit;end
