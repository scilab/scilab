// =============================================================================
// Scilab ( http://www.scilab.org/ ) - This file is part of Scilab
// Copyright (C) 2014 - Scilab Enterprises - Paul Bignier
//
//  This file is distributed under the same license as the Scilab package.
// =============================================================================
loadXcosLibs();
// Allocate a diagram and access its fields
scs_m = scicos_diagram()
objectCreated( 1 , DIAGRAM )
propertyUpdated( 1 , DIAGRAM , TITLE ) : NO_CHANGES
propertyUpdated( 1 , DIAGRAM , PATH ) : NO_CHANGES
propertyUpdated( 1 , DIAGRAM , PROPERTIES ) : NO_CHANGES
propertyUpdated( 1 , DIAGRAM , PROPERTIES ) : NO_CHANGES
propertyUpdated( 1 , DIAGRAM , CONTEXT ) : NO_CHANGES
propertyUpdated( 1 , DIAGRAM , CHILDREN ) : NO_CHANGES
propertyUpdated( 1 , DIAGRAM , VERSION_NUMBER ) : NO_CHANGES
scs_m  = 
scicos_diagram type :
  props
  objs
  version
  contrib
scs_m.props
 ans  =
wpar = []
title = ["Untitled";""]
tol = [0.000001;0.000001;1.0000D-10;100001;0;1;0]
tf = 100000
context = 
void1 = []
options = tlist("scsopt")
void2 = []
void3 = []
doc = list()
scs_m.objs
 ans  =
()
scs_m.version
 ans  =
 
scs_m.contrib
 ans  =
()
// Create a diagram containing 2 summation blocks and an empty link
Sum   = BIGSOM_f("define");
objectCreated( 2 , BLOCK )
propertyUpdated( 2 , BLOCK , GEOMETRY ) : NO_CHANGES
propertyUpdated( 2 , BLOCK , GEOMETRY ) : SUCCESS
propertyUpdated( 2 , BLOCK , ANGLE ) : NO_CHANGES
propertyUpdated( 2 , BLOCK , ANGLE ) : NO_CHANGES
propertyUpdated( 2 , BLOCK , EXPRS ) : SUCCESS
objectCreated( 3 , PORT )
propertyUpdated( 3 , PORT , SOURCE_BLOCK ) : SUCCESS
propertyUpdated( 3 , PORT , PORT_KIND ) : SUCCESS
objectCreated( 4 , PORT )
propertyUpdated( 4 , PORT , SOURCE_BLOCK ) : SUCCESS
propertyUpdated( 4 , PORT , PORT_KIND ) : SUCCESS
propertyUpdated( 2 , BLOCK , INPUTS ) : SUCCESS
objectCreated( 5 , PORT )
propertyUpdated( 5 , PORT , SOURCE_BLOCK ) : SUCCESS
propertyUpdated( 5 , PORT , PORT_KIND ) : SUCCESS
propertyUpdated( 2 , BLOCK , OUTPUTS ) : SUCCESS
propertyUpdated( 2 , BLOCK , LABEL ) : NO_CHANGES
propertyUpdated( 3 , PORT , IMPLICIT ) : NO_CHANGES
propertyUpdated( 4 , PORT , IMPLICIT ) : NO_CHANGES
propertyUpdated( 5 , PORT , IMPLICIT ) : NO_CHANGES
propertyUpdated( 3 , PORT , STYLE ) : NO_CHANGES
propertyUpdated( 4 , PORT , STYLE ) : NO_CHANGES
propertyUpdated( 5 , PORT , STYLE ) : NO_CHANGES
propertyUpdated( 3 , PORT , LABEL ) : NO_CHANGES
propertyUpdated( 4 , PORT , LABEL ) : NO_CHANGES
propertyUpdated( 5 , PORT , LABEL ) : NO_CHANGES
propertyUpdated( 2 , BLOCK , STYLE ) : NO_CHANGES
propertyUpdated( 2 , BLOCK , SIM_FUNCTION_NAME ) : SUCCESS
propertyUpdated( 2 , BLOCK , SIM_FUNCTION_API ) : SUCCESS
propertyUpdated( 4 , PORT , DATATYPE ) : SUCCESS
propertyUpdated( 3 , PORT , DATATYPE ) : SUCCESS
propertyUpdated( 5 , PORT , DATATYPE ) : SUCCESS
propertyUpdated( 2 , BLOCK , STATE ) : NO_CHANGES
propertyUpdated( 2 , BLOCK , DSTATE ) : NO_CHANGES
propertyUpdated( 2 , BLOCK , RPAR ) : SUCCESS
propertyUpdated( 2 , BLOCK , IPAR ) : NO_CHANGES
propertyUpdated( 2 , BLOCK , SIM_BLOCKTYPE ) : SUCCESS
propertyUpdated( 2 , BLOCK , SIM_DEP_UT ) : SUCCESS
propertyUpdated( 2 , BLOCK , LABEL ) : NO_CHANGES
propertyUpdated( 2 , BLOCK , NZCROSS ) : NO_CHANGES
propertyUpdated( 2 , BLOCK , NMODE ) : NO_CHANGES
propertyUpdated( 2 , BLOCK , UID ) : NO_CHANGES
propertyUpdated( 2 , BLOCK , INTERFACE_FUNCTION ) : SUCCESS
Scope = CSCOPE("define");
objectCreated( 6 , BLOCK )
propertyUpdated( 6 , BLOCK , GEOMETRY ) : NO_CHANGES
propertyUpdated( 6 , BLOCK , GEOMETRY ) : SUCCESS
propertyUpdated( 6 , BLOCK , ANGLE ) : NO_CHANGES
propertyUpdated( 6 , BLOCK , ANGLE ) : NO_CHANGES
propertyUpdated( 6 , BLOCK , EXPRS ) : SUCCESS
objectCreated( 7 , PORT )
propertyUpdated( 7 , PORT , SOURCE_BLOCK ) : SUCCESS
propertyUpdated( 7 , PORT , PORT_KIND ) : SUCCESS
propertyUpdated( 6 , BLOCK , INPUTS ) : SUCCESS
objectCreated( 8 , PORT )
propertyUpdated( 8 , PORT , SOURCE_BLOCK ) : SUCCESS
propertyUpdated( 8 , PORT , PORT_KIND ) : SUCCESS
propertyUpdated( 6 , BLOCK , EVENT_INPUTS ) : SUCCESS
propertyUpdated( 6 , BLOCK , LABEL ) : NO_CHANGES
propertyUpdated( 7 , PORT , IMPLICIT ) : NO_CHANGES
propertyUpdated( 7 , PORT , STYLE ) : NO_CHANGES
propertyUpdated( 7 , PORT , LABEL ) : NO_CHANGES
propertyUpdated( 6 , BLOCK , STYLE ) : NO_CHANGES
propertyUpdated( 6 , BLOCK , SIM_FUNCTION_NAME ) : SUCCESS
propertyUpdated( 6 , BLOCK , SIM_FUNCTION_API ) : SUCCESS
propertyUpdated( 7 , PORT , DATATYPE ) : SUCCESS
propertyUpdated( 7 , PORT , DATATYPE ) : NO_CHANGES
propertyUpdated( 8 , PORT , DATATYPE ) : SUCCESS
propertyUpdated( 6 , BLOCK , STATE ) : NO_CHANGES
propertyUpdated( 6 , BLOCK , DSTATE ) : NO_CHANGES
propertyUpdated( 6 , BLOCK , RPAR ) : SUCCESS
propertyUpdated( 6 , BLOCK , IPAR ) : SUCCESS
propertyUpdated( 6 , BLOCK , SIM_BLOCKTYPE ) : SUCCESS
propertyUpdated( 6 , BLOCK , SIM_DEP_UT ) : SUCCESS
propertyUpdated( 6 , BLOCK , LABEL ) : NO_CHANGES
propertyUpdated( 6 , BLOCK , NZCROSS ) : NO_CHANGES
propertyUpdated( 6 , BLOCK , NMODE ) : NO_CHANGES
propertyUpdated( 6 , BLOCK , UID ) : NO_CHANGES
propertyUpdated( 6 , BLOCK , INTERFACE_FUNCTION ) : SUCCESS
lnk   = scicos_link();
objectCreated( 9 , LINK )
propertyUpdated( 9 , LINK , CONTROL_POINTS ) : NO_CHANGES
propertyUpdated( 9 , LINK , CONTROL_POINTS ) : NO_CHANGES
propertyUpdated( 9 , LINK , LABEL ) : NO_CHANGES
propertyUpdated( 9 , LINK , THICK ) : NO_CHANGES
propertyUpdated( 9 , LINK , COLOR ) : NO_CHANGES
propertyUpdated( 9 , LINK , KIND ) : NO_CHANGES
propertyUpdated( 9 , LINK , SOURCE_PORT ) : NO_CHANGES
propertyUpdated( 9 , LINK , DESTINATION_PORT ) : NO_CHANGES
scs_m = scicos_diagram( objs=list(Sum,Scope,lnk) )
objectCreated( 10 , DIAGRAM )
propertyUpdated( 10 , DIAGRAM , TITLE ) : NO_CHANGES
propertyUpdated( 10 , DIAGRAM , PATH ) : NO_CHANGES
propertyUpdated( 10 , DIAGRAM , PROPERTIES ) : NO_CHANGES
propertyUpdated( 10 , DIAGRAM , PROPERTIES ) : NO_CHANGES
propertyUpdated( 10 , DIAGRAM , CONTEXT ) : NO_CHANGES
propertyUpdated( 2 , BLOCK , PARENT_DIAGRAM ) : SUCCESS
propertyUpdated( 6 , BLOCK , PARENT_DIAGRAM ) : SUCCESS
propertyUpdated( 9 , LINK , PARENT_DIAGRAM ) : SUCCESS
propertyUpdated( 10 , DIAGRAM , CHILDREN ) : SUCCESS
propertyUpdated( 10 , DIAGRAM , VERSION_NUMBER ) : NO_CHANGES
scs_m  = 
scicos_diagram type :
  props
  objs
  version
  contrib
scs_m.objs
 ans  =
     (1)
scicos_Block type :
  graphics
  model
  gui
  doc
     (2)
scicos_Block type :
  graphics
  model
  gui
  doc
     (3)
scicos_Link type :
  xx
  yy
  id
  thick
  ct
  from
  to
// Link output port #1 of block #1 (ID #5 in this example) with input port #1 of block #2 (ID #7)
// The link ID is #10
l = scs_m.objs;
l(3).from = [1 1 0]; // Link block #1
propertyUpdated( 5 , PORT , CONNECTED_SIGNALS ) : SUCCESS
propertyUpdated( 9 , LINK , SOURCE_PORT ) : SUCCESS
l(1).graphics.pout   // Check that block #1 is connected to the link
 ans  =
    3.
l(1).model.out       // "
 ans  =
  - 1.
l(3).to = [2 1 1];   // Link block #2
propertyUpdated( 7 , PORT , CONNECTED_SIGNALS ) : SUCCESS
propertyUpdated( 9 , LINK , DESTINATION_PORT ) : SUCCESS
l(3).from
 ans  =
    1.    1.    0.
l(3).to
 ans  =
    2.    1.    1.
l(2).graphics.pin    // Check that block #2 is connected to the link
 ans  =
    3.
l(2).model.in        // "
 ans  =
  - 1.
// Change the end of the link to input port #2 of block #2 (ID #8)
l(3).to = [2 2 1];
propertyUpdated( 7 , PORT , CONNECTED_SIGNALS ) : SUCCESS
objectCreated( 11 , PORT )
propertyUpdated( 11 , PORT , IMPLICIT ) : NO_CHANGES
propertyUpdated( 11 , PORT , PORT_KIND ) : SUCCESS
propertyUpdated( 11 , PORT , SOURCE_BLOCK ) : SUCCESS
propertyUpdated( 11 , PORT , CONNECTED_SIGNALS ) : NO_CHANGES
propertyUpdated( 11 , PORT , DATATYPE ) : SUCCESS
propertyUpdated( 6 , BLOCK , INPUTS ) : SUCCESS
propertyUpdated( 11 , PORT , CONNECTED_SIGNALS ) : SUCCESS
propertyUpdated( 9 , LINK , DESTINATION_PORT ) : SUCCESS
l(3).from
 ans  =
    1.    1.    0.
l(3).to
 ans  =
    2.    2.    1.
l(2).graphics.pin  // Check that block #2 is connected to the link
 ans  =
    0.
    3.
l(2).model.in      // "
 ans  =
  - 1.
  - 1.
// Disconnect the source, the destination is also disconnected
l(3).from = [0 0 0];
propertyUpdated( 5 , PORT , CONNECTED_SIGNALS ) : SUCCESS
propertyUpdated( 11 , PORT , CONNECTED_SIGNALS ) : SUCCESS
propertyUpdated( 9 , LINK , SOURCE_PORT ) : SUCCESS
propertyUpdated( 9 , LINK , DESTINATION_PORT ) : SUCCESS
l(3).from
 ans  =
    0.    0.    0.
l(3).to
 ans  =
    0.    0.    0.
l(1).graphics.pout // Check that both blocks are unconnected
 ans  =
    0.
l(2).graphics.pin  // "
 ans  =
    0.
    0.
