// =============================================================================
// Scilab ( http://www.scilab.org/ ) - This file is part of Scilab
// Copyright (C) 2014 - Scilab Enterprises - Paul Bignier
//
//  This file is distributed under the same license as the Scilab package.
// =============================================================================
// <-- CLI SHELL MODE -->
loadXcosLibs();
// Create one block and make a list out of it (duplicate it)
Sum = BIGSOM_f("define");
objectCreated( 1 , BLOCK )
propertyUpdated( 1 , BLOCK , GEOMETRY ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , GEOMETRY ) : SUCCESS
propertyUpdated( 1 , BLOCK , ANGLE ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , ANGLE ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , EXPRS ) : SUCCESS
objectCreated( 2 , PORT )
propertyUpdated( 2 , PORT , SOURCE_BLOCK ) : SUCCESS
propertyUpdated( 2 , PORT , PORT_KIND ) : SUCCESS
objectCreated( 3 , PORT )
propertyUpdated( 3 , PORT , SOURCE_BLOCK ) : SUCCESS
propertyUpdated( 3 , PORT , PORT_KIND ) : SUCCESS
propertyUpdated( 1 , BLOCK , INPUTS ) : SUCCESS
objectCreated( 4 , PORT )
propertyUpdated( 4 , PORT , SOURCE_BLOCK ) : SUCCESS
propertyUpdated( 4 , PORT , PORT_KIND ) : SUCCESS
propertyUpdated( 1 , BLOCK , OUTPUTS ) : SUCCESS
propertyUpdated( 1 , BLOCK , LABEL ) : NO_CHANGES
propertyUpdated( 2 , PORT , IMPLICIT ) : NO_CHANGES
propertyUpdated( 3 , PORT , IMPLICIT ) : NO_CHANGES
propertyUpdated( 4 , PORT , IMPLICIT ) : NO_CHANGES
propertyUpdated( 2 , PORT , STYLE ) : NO_CHANGES
propertyUpdated( 3 , PORT , STYLE ) : NO_CHANGES
propertyUpdated( 4 , PORT , STYLE ) : NO_CHANGES
propertyUpdated( 2 , PORT , LABEL ) : NO_CHANGES
propertyUpdated( 3 , PORT , LABEL ) : NO_CHANGES
propertyUpdated( 4 , PORT , LABEL ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , STYLE ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , SIM_FUNCTION_NAME ) : SUCCESS
propertyUpdated( 1 , BLOCK , SIM_FUNCTION_API ) : SUCCESS
propertyUpdated( 3 , PORT , DATATYPE ) : SUCCESS
propertyUpdated( 2 , PORT , DATATYPE ) : SUCCESS
propertyUpdated( 4 , PORT , DATATYPE ) : SUCCESS
propertyUpdated( 1 , BLOCK , STATE ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , DSTATE ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , ODSTATE ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , RPAR ) : SUCCESS
propertyUpdated( 1 , BLOCK , IPAR ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , OPAR ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , SIM_BLOCKTYPE ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , SIM_DEP_UT ) : SUCCESS
propertyUpdated( 1 , BLOCK , LABEL ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , NZCROSS ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , NMODE ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , UID ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , INTERFACE_FUNCTION ) : SUCCESS
l = list(Sum);
// Copy the list content (no duplicate)
Sum2 = l(1)
Sum2  = 
GUI     : BIGSOM_f
Graphics: 
          orig = [0,0]
          sz = [2,3]
          flip = %t
          theta = 0
          exprs = "[1;1]"
          pin = [0;0]
          pout = 0
          pein = []
          peout = []
          gr_i = []
          id = ""
          in_implicit = ["E";"E"]
          out_implicit = "E"
          in_style = ["";""]
          out_style = ""
          in_label = ["";""]
          out_label = ""
          style = ""
Model   : 
          sum type: 2
          in = [-1;-1]
          in2 = [1;1]
          intyp = [1;1]
          out = -1
          out2 = 1
          outtyp = 1
          evtin = []
          evtout = []
          state = []
          dstate = []
          odstate = list()
          rpar = [1;1]
          ipar = []
          opar = list()
          blocktype = "c"
          firing = []
          dep_ut = [%t,%f]
          label = ""
          nzcross = 0
          nmode = 0
          equations = list()
          uid = ""
// The following action should not delete the Block in the model
clear Sum
// Sum2's refCount must have been affected by "clear Sum"
Sum2
Sum2  = 
GUI     : BIGSOM_f
Graphics: 
          orig = [0,0]
          sz = [2,3]
          flip = %t
          theta = 0
          exprs = "[1;1]"
          pin = [0;0]
          pout = 0
          pein = []
          peout = []
          gr_i = []
          id = ""
          in_implicit = ["E";"E"]
          out_implicit = "E"
          in_style = ["";""]
          out_style = ""
          in_label = ["";""]
          out_label = ""
          style = ""
Model   : 
          sum type: 2
          in = [-1;-1]
          in2 = [1;1]
          intyp = [1;1]
          out = -1
          out2 = 1
          outtyp = 1
          evtin = []
          evtout = []
          state = []
          dstate = []
          odstate = list()
          rpar = [1;1]
          ipar = []
          opar = list()
          blocktype = "c"
          firing = []
          dep_ut = [%t,%f]
          label = ""
          nzcross = 0
          nmode = 0
          equations = list()
          uid = ""
// Delete the original block in the model
clear
propertyUpdated( 1 , BLOCK , INPUTS ) : SUCCESS
propertyUpdated( 1 , BLOCK , OUTPUTS ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , EVENT_INPUTS ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , EVENT_OUTPUTS ) : NO_CHANGES
objectDeleted( 2 , PORT )
propertyUpdated( 1 , BLOCK , INPUTS ) : SUCCESS
propertyUpdated( 1 , BLOCK , OUTPUTS ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , EVENT_INPUTS ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , EVENT_OUTPUTS ) : NO_CHANGES
objectDeleted( 3 , PORT )
propertyUpdated( 1 , BLOCK , INPUTS ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , OUTPUTS ) : SUCCESS
propertyUpdated( 1 , BLOCK , EVENT_INPUTS ) : NO_CHANGES
propertyUpdated( 1 , BLOCK , EVENT_OUTPUTS ) : NO_CHANGES
objectDeleted( 4 , PORT )
objectDeleted( 1 , BLOCK )
