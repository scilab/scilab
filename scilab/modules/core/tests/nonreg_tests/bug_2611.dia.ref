// <-- Non-regression test for bug 2611 (part 1) -->
//
// <-- Bugzilla URL -->
// http://bugzilla.scilab.org/show_bug.cgi?id=2611
//
// <-- Short Description -->
// for loop variable not removed when an error arises within a for called in try context
// Copyright INRIA
// Scilab Project - Serge Steer
// Date : 12 feb 2008
  	
function r=test()
  r=%f
  try
    for j=1:3, error('test',1001); end
  catch
    r=%t
  end
endfunction
if ~test() then bugmes();quit;end
if lasterror()<>'test' then bugmes();quit;end
deff('r=test()',['r=%f'
'try,'
'    for j=1:3, error(''test'',1001); end,'
'catch'
'    r=%t'
'end'],'n')
Warning : redefining function: test                    

if ~test() then bugmes();quit;end
if lasterror()<>'test' then bugmes();quit;end
