//<-- CLI SHELL MODE -->
// =============================================================================
// Scilab ( http://www.scilab.org/ ) - This file is part of Scilab
// Copyright (C) 2010 - INRIA - Serge Steer
//
//  This file is distributed under the same license as the Scilab package.
// =============================================================================

// <-- Non-regression test for bug 6635 -->
//
// <-- Bugzilla URL -->
// http://bugzilla.scilab.org/show_bug.cgi?id=6635
//
// <-- Short Description -->
//  Incorrectly drawn Bode plots (calfrq bug).

num=real(poly([0.75788802401980426;-0.74488662950015194;0.71042740727148268+%i*0.32150242887306801;
	       0.71042740727148268-%i*0.32150242887306801;0.88108463001435433;
	       0.65688756930625614+%i*0.70651639282163481;0.65688756930625614-%i*0.70651639282163481;
	       0.87396240470428910+%i*0.38544888973757035;0.87396240470428910-%i*0.38544888973757035;
	       0.96638845127253781+%i*0.20986303449468094;0.96638845127253781-%i*0.20986303449468094;
	       0.99463810059227120+%i*0.1259837606842592;0.99463810059227120-%i*0.1259837606842592;
	       -8.33517712317947712],'z'));



den=real(poly([0.44209498830922006+%i*0.58376435045145136;0.44209498830922006-%i*0.58376435045145136;
	       0.74984178464015416+%i*0.23826316198364383;0.74984178464015416-%i*0.23826316198364383;
	       0.88908657183242579;0.78005500218689083;0.73910333806015660+%i*0.66143232274074371;
	       0.73910333806015660-%i*0.66143232274074371;0.91630828475086279+%i*0.37654428560847641;
	       0.91630828475086279-%i*0.37654428560847641;0.97669896242019394+%i*0.19145035111644124;
	       0.97669896242019394-%i*0.19145035111644124;0.98956694435920334+%i*0.09896014014807389;
	       0.98956694435920334-%i*0.09896014014807389],'z'));


[frq,bnds,splitf]=calfrq(rlist(num,den,0.00999897500976181),1,10);
if or(diff(frq)<0) then pause,end
