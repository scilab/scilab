// =============================================================================
// Copyright (C) 2010 - 2012 - INRIA - Allan CORNET
// =============================================================================
// <-- CLI SHELL MODE -->
// =============================================================================
// <-- LONG TIME EXECUTION -->
//
// <-- Non-regression test for bug 194 -->
//
// <-- URL -->
// http://forge.scilab.org/index.php/p/csv-readwrite/issues/194/
//
// <-- Short Description -->
// csvRead may fail on large files.
// =============================================================================
filename = fullfile(TMPDIR, "prices.csv");
mprintf("File=%s\n",filename);
File=TMPDIR/prices.csv
fd = mopen(filename,"w");
imax=1800000;
for i= 1:imax
  if ( modulo(i,10000)==0 ) then
    mprintf("i=%d, p=%.1f%%\n",i,i/imax*100)
  end
  mputl("02/05/10 00:00:02,1.32453,1.32491",fd); 
end
i=10000, p=0.6%
i=20000, p=1.1%
i=30000, p=1.7%
i=40000, p=2.2%
i=50000, p=2.8%
i=60000, p=3.3%
i=70000, p=3.9%
i=80000, p=4.4%
i=90000, p=5.0%
i=100000, p=5.6%
i=110000, p=6.1%
i=120000, p=6.7%
i=130000, p=7.2%
i=140000, p=7.8%
i=150000, p=8.3%
i=160000, p=8.9%
i=170000, p=9.4%
i=180000, p=10.0%
i=190000, p=10.6%
i=200000, p=11.1%
i=210000, p=11.7%
i=220000, p=12.2%
i=230000, p=12.8%
i=240000, p=13.3%
i=250000, p=13.9%
i=260000, p=14.4%
i=270000, p=15.0%
i=280000, p=15.6%
i=290000, p=16.1%
i=300000, p=16.7%
i=310000, p=17.2%
i=320000, p=17.8%
i=330000, p=18.3%
i=340000, p=18.9%
i=350000, p=19.4%
i=360000, p=20.0%
i=370000, p=20.6%
i=380000, p=21.1%
i=390000, p=21.7%
i=400000, p=22.2%
i=410000, p=22.8%
i=420000, p=23.3%
i=430000, p=23.9%
i=440000, p=24.4%
i=450000, p=25.0%
i=460000, p=25.6%
i=470000, p=26.1%
i=480000, p=26.7%
i=490000, p=27.2%
i=500000, p=27.8%
i=510000, p=28.3%
i=520000, p=28.9%
i=530000, p=29.4%
i=540000, p=30.0%
i=550000, p=30.6%
i=560000, p=31.1%
i=570000, p=31.7%
i=580000, p=32.2%
i=590000, p=32.8%
i=600000, p=33.3%
i=610000, p=33.9%
i=620000, p=34.4%
i=630000, p=35.0%
i=640000, p=35.6%
i=650000, p=36.1%
i=660000, p=36.7%
i=670000, p=37.2%
i=680000, p=37.8%
i=690000, p=38.3%
i=700000, p=38.9%
i=710000, p=39.4%
i=720000, p=40.0%
i=730000, p=40.6%
i=740000, p=41.1%
i=750000, p=41.7%
i=760000, p=42.2%
i=770000, p=42.8%
i=780000, p=43.3%
i=790000, p=43.9%
i=800000, p=44.4%
i=810000, p=45.0%
i=820000, p=45.6%
i=830000, p=46.1%
i=840000, p=46.7%
i=850000, p=47.2%
i=860000, p=47.8%
i=870000, p=48.3%
i=880000, p=48.9%
i=890000, p=49.4%
i=900000, p=50.0%
i=910000, p=50.6%
i=920000, p=51.1%
i=930000, p=51.7%
i=940000, p=52.2%
i=950000, p=52.8%
i=960000, p=53.3%
i=970000, p=53.9%
i=980000, p=54.4%
i=990000, p=55.0%
i=1000000, p=55.6%
i=1010000, p=56.1%
i=1020000, p=56.7%
i=1030000, p=57.2%
i=1040000, p=57.8%
i=1050000, p=58.3%
i=1060000, p=58.9%
i=1070000, p=59.4%
i=1080000, p=60.0%
i=1090000, p=60.6%
i=1100000, p=61.1%
i=1110000, p=61.7%
i=1120000, p=62.2%
i=1130000, p=62.8%
i=1140000, p=63.3%
i=1150000, p=63.9%
i=1160000, p=64.4%
i=1170000, p=65.0%
i=1180000, p=65.6%
i=1190000, p=66.1%
i=1200000, p=66.7%
i=1210000, p=67.2%
i=1220000, p=67.8%
i=1230000, p=68.3%
i=1240000, p=68.9%
i=1250000, p=69.4%
i=1260000, p=70.0%
i=1270000, p=70.6%
i=1280000, p=71.1%
i=1290000, p=71.7%
i=1300000, p=72.2%
i=1310000, p=72.8%
i=1320000, p=73.3%
i=1330000, p=73.9%
i=1340000, p=74.4%
i=1350000, p=75.0%
i=1360000, p=75.6%
i=1370000, p=76.1%
i=1380000, p=76.7%
i=1390000, p=77.2%
i=1400000, p=77.8%
i=1410000, p=78.3%
i=1420000, p=78.9%
i=1430000, p=79.4%
i=1440000, p=80.0%
i=1450000, p=80.6%
i=1460000, p=81.1%
i=1470000, p=81.7%
i=1480000, p=82.2%
i=1490000, p=82.8%
i=1500000, p=83.3%
i=1510000, p=83.9%
i=1520000, p=84.4%
i=1530000, p=85.0%
i=1540000, p=85.6%
i=1550000, p=86.1%
i=1560000, p=86.7%
i=1570000, p=87.2%
i=1580000, p=87.8%
i=1590000, p=88.3%
i=1600000, p=88.9%
i=1610000, p=89.4%
i=1620000, p=90.0%
i=1630000, p=90.6%
i=1640000, p=91.1%
i=1650000, p=91.7%
i=1660000, p=92.2%
i=1670000, p=92.8%
i=1680000, p=93.3%
i=1690000, p=93.9%
i=1700000, p=94.4%
i=1710000, p=95.0%
i=1720000, p=95.6%
i=1730000, p=96.1%
i=1740000, p=96.7%
i=1750000, p=97.2%
i=1760000, p=97.8%
i=1770000, p=98.3%
i=1780000, p=98.9%
i=1790000, p=99.4%
i=1800000, p=100.0%
mclose(fd);
assert_checkequal(execstr("M = csvRead(filename,[],[],""string"");", "errcatch"), 0);
clear M
// =============================================================================
