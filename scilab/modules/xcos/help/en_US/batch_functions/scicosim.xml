<?xml version="1.0" encoding="UTF-8"?>
<!--
 * Scicos
 *
 * Copyright (C) INRIA - METALAU Project <scicos@inria.fr> (HTML version)
 * Copyright (C) DIGITEO - Scilab Consortium (XML Docbook version)
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 *  (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
 *
 * See the file ./license.txt
 -->
<refentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svg="http://www.w3.org/2000/svg" xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:db="http://docbook.org/ns/docbook" xmlns:scilab="http://www.scilab.org" xml:id="scicosim">
    <refnamediv>
        <refname>scicosim</refname>
        <refpurpose>xcos (batch) simulation function</refpurpose>
    </refnamediv>
    <refsynopsisdiv>
        <title>Syntax</title>
        <synopsis>[state,t] = scicosim(state,tcur,tf,sim,str,tol)</synopsis>
    </refsynopsisdiv>
    <refsection id="Module_scicosim">
        <title>Module</title>
        <itemizedlist>
            <listitem>
                <para>
                    <link linkend="xcos">xcos</link>
                </para>
            </listitem>
        </itemizedlist>
    </refsection>
    <refsection id="Description_scicosim">
        <title>Description</title>
        <para>
            Simulator for xcos compiled diagram.
        </para>
        <para>
            Usually scicosim is called by xcos to perform simulation of a diagram.
        </para>
        <para>
            But scicosim may also be called outside xcos. Typical usage in such a case may be :
        </para>
        <para>
        </para>
        <para>
            For advanced user it is possible to "manually" change some parameters or state values.
        </para>
        <para>
        </para>
        <programlisting role="example"><![CDATA[
[state,t] = scicosim(state,tcur,tf,sim,str,tol)
 ]]></programlisting>
    </refsection>
    <refsection id="Parameters_scicosim">
        <title>Arguments</title>
        <itemizedlist>
            <listitem>
                <para>
                    <emphasis role="bold">state :</emphasis> Scilab tlist containing initial state. Usually generated by xcos Compile. After loading a compiled .cos file, it can be found in %cpr.state.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis role="bold">tcur :</emphasis> starting time of simulation. At the beginning it must be zero.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis role="bold">tf :</emphasis> final simulation time.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis role="bold">sim :</emphasis> Scilab tlist containing compilation results. Usually generated by xcos Compile. After loading a compiled .cos file, it can be found in %cpr.sim.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis role="bold">str :</emphasis> 'start' , 'run' or 'finish'. Function must be first called with 'start', then with 'run' one or more times, and finally with 'finish'.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis role="bold">tol :</emphasis> vector [atol,rtol,ttol,deltat,realtimescale,solver,hmax] where atol, rtol are respectively the absolute and relative tolerances for ode or dae solver, ttol is the precision on event dates (must be very small), deltat is maximum integration interval for each call to ode solver (sometimes needed to force restarting the call to solver), realtimescale is the correspondence between simulation time and real time (0 means no slowing down), solver is the choice of solver (0: lsodar, 100: daskr), hmax: max step size used by solver. Default: [0.0001,1.000E-06,1.000E-10,100001,0,0]
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis role="bold">state :</emphasis> state after simulation
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis role="bold">t:</emphasis> final reached time. Usually tf but not always.
                </para>
            </listitem>
        </itemizedlist>
    </refsection>
    <refsection id="SeeAlso_scicosim">
        <title>See also</title>
        <itemizedlist>
            <listitem>
                <para>
                    <link linkend="scicos_simulate">scicos_simulate - Function for running xcos simulation in batch mode (Scilab Function)</link>
                </para>
            </listitem>
            <listitem>
                <para>
                    <link linkend="xcos">xcos - Block diagram editor and GUI for the hybrid simulator (Scilab Function)</link>
                </para>
            </listitem>
        </itemizedlist>
    </refsection>
</refentry>
