// ==========================================
// Copyright INRIA
// Copyright Enpc
// last modified : 14th, December 2005
// ==========================================

mode(0);

string_to_display = [
	'kp=xget(''pixmap'');xset(''pixmap'',1);';
	'xset(''wwpc'');  // clean pixmap';
	'xset(''pixmap'',1)';
	'U = linspace(0,3*%pi,60);';
	'v = linspace(0,2*%pi,20);';
	'n=size(U,''*'');';
	'realtimeinit(0.1);realtime(0)';
	'K=20:4:n;';
	'for k=1:size(K,''*'')';
	'  u=U(1:K(k));';
	'  x= (cos(u).*u)''*(1+cos(v)/2);';
	'  y= (u/2)''*sin(v);';
	'  z= (sin(u).*u)''*(1+cos(v)/2);';
	'  realtime(k);';
	'  plot3d2(x,y,z,-1,62,152,''X@Y@Z'',[10,1,4],[-15 10 -5 5 -10 12])';
	'  xset(''wshow'')';
	'end'];

x_message(string_to_display);
execstr(string_to_display);

xset('pixmap',kp);

mode(-1);
